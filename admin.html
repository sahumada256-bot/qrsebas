<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Administrar Menú</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { background: #1a1a1a; color: #f5f5f5; font-family: 'Segoe UI', sans-serif; }
    h1 { text-align: center; margin: 20px 0; color: #ffb347; font-weight: bold; }
    table { background: rgba(255,255,255,0.05); border-radius: 8px; }
    input, select { margin-bottom: 10px; }
    .btn { margin-right: 5px; }
    .back { margin-bottom: 20px; }
    #loginDiv { max-width: 400px; margin: auto; margin-top: 50px; }
    #adminContent { display: none; }
  </style>
</head>
<body>
  <div id="loginDiv" class="container">
    <h1>Login Admin</h1>
    <input type="text" id="username" class="form-control" placeholder="Usuario">
    <input type="password" id="password" class="form-control" placeholder="Contraseña">
    <button class="btn btn-success w-100" onclick="login()">Ingresar</button>
  </div>

  <div id="adminContent">
    <div class="container">
      <h1>Administrar Menú</h1>
      <div class="back text-center">
        <a href="menu.html" class="btn btn-secondary">⬅️ Volver al Menú</a>
      </div>

      <div class="mb-4">
        <input type="text" id="producto" class="form-control" placeholder="Nombre del producto">
        <input type="number" id="precio" class="form-control" placeholder="Precio">
        <select id="categoria" class="form-control">
          <option value="Entradas">Entradas</option>
          <option value="Platos principales">Platos principales</option>
          <option value="Postres">Postres</option>
          <option value="Bebidas">Bebidas</option>
        </select>
        <button class="btn btn-warning w-100" onclick="agregarProducto()">Agregar producto</button>
      </div>

      <table class="table table-dark table-striped">
        <thead>
          <tr>
            <th>Producto</th>
            <th>Precio</th>
            <th>Categoría</th>
            <th>Acciones</th>
          </tr>
        </thead>
        <tbody id="tablaProductos"></tbody>
      </table>
    </div>
  </div>

  <script>
    const USER = 'admin';
    const PASS = '1234';

    function login() {
      const username = document.getElementById('username').value;
      const password = document.getElementById('password').value;

      if(username === USER && password === PASS){
        document.getElementById('loginDiv').style.display = 'none';
        document.getElementById('adminContent').style.display = 'block';
        productos = JSON.parse(localStorage.getItem('productos')) || productosIniciales();
        mostrarProductos();
      } else {
        alert('Usuario o contraseña incorrectos');
      }
    }

    function productosIniciales(){
      return [
        {nombre:"Ensalada César", precio:2500, categoria:"Entradas"},
        {nombre:"Bruschettas", precio:1800, categoria:"Entradas"},
        {nombre:"Sopa de Calabaza", precio:2000, categoria:"Entradas"},
        {nombre:"Empanadas Criollas", precio:2200, categoria:"Entradas"},
        {nombre:"Bife de Chorizo con papas", precio:6500, categoria:"Platos principales"},
        {nombre:"Pasta con Salsa Alfredo", precio:5200, categoria:"Platos principales"},
        {nombre:"Pizza Margarita", precio:4800, categoria:"Platos principales"},
        {nombre:"Pollo a la parrilla con ensalada", precio:5900, categoria:"Platos principales"},
        {nombre:"Cheesecake de frutos rojos", precio:2800, categoria:"Postres"},
        {nombre:"Brownie con helado", precio:2500, categoria:"Postres"},
        {nombre:"Flan casero", precio:2200, categoria:"Postres"},
        {nombre:"Helados artesanales", precio:2400, categoria:"Postres"},
        {nombre:"Agua mineral", precio:1200, categoria:"Bebidas"},
        {nombre:"Gaseosa", precio:1500, categoria:"Bebidas"},
        {nombre:"Cerveza artesanal", precio:2300, categoria:"Bebidas"},
        {nombre:"Copa de vino Malbec", precio:3000, categoria:"Bebidas"},
      ];
    }

    let productos = [];

    function mostrarProductos() {
      const tbody = document.getElementById('tablaProductos');
      tbody.innerHTML = '';
      productos.forEach((prod, index) => {
        tbody.innerHTML += `
          <tr>
            <td><input type="text" value="${prod.nombre}" onchange="editarProducto(${index}, 'nombre', this.value)"></td>
            <td><input type="number" value="${prod.precio}" onchange="editarProducto(${index}, 'precio', this.value)"></td>
            <td>
              <select onchange="editarProducto(${index}, 'categoria', this.value)">
                <option ${prod.categoria=='Entradas'?'selected':''}>Entradas</option>
                <option ${prod.categoria=='Platos principales'?'selected':''}>Platos principales</option>
                <option ${prod.categoria=='Postres'?'selected':''}>Postres</option>
                <option ${prod.categoria=='Bebidas'?'selected':''}>Bebidas</option>
              </select>
            </td>
            <td>
              <button class="btn btn-danger btn-sm" onclick="eliminarProducto(${index})">Eliminar</button>
            </td>
          </tr>
        `;
      });
      localStorage.setItem('productos', JSON.stringify(productos));
    }

    function agregarProducto() {
      const nombre = document.getElementById('producto').value;
      const precio = document.getElementById('precio').value;
      const categoria = document.getElementById('categoria').value;
      if(nombre && precio){
        productos.push({nombre, precio, categoria});
        document.getElementById('producto').value='';
        document.getElementById('precio').value='';
        mostrarProductos();
      } else alert('Completa todos los campos');
    }

    function editarProducto(index, campo, valor) {
      productos[index][campo] = valor;
      localStorage.setItem('productos', JSON.stringify(productos));
    }

    function eliminarProducto(index) {
      productos.splice(index,1);
      mostrarProductos();
    }
  </script>
</body>
</html>
